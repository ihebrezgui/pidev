{% extends 'baseB.html.twig' %}

{% block title %}Formation{% endblock %}

{% block gestion %}
    <h1>Formation</h1>

    <table class="table">
        <tbody>
            <tr>
                <td><img src="{{asset('formations_imgs/'~ formation.img) }}" style="max-width: 200px;" alt=""></td>
            </tr>
            <tr>
                <th>IdFormation</th>
                <td>{{ formation.idFormation }}</td>
            </tr>
            <tr>
                <th>TypeF</th>
                <td>{{ formation.typeF }}</td>
            </tr>
            <tr>
                <th>Prix</th>
                <td>{{ formation.prix }}</td>
            </tr>
            <tr>
                <th>Duree</th>
                <td>{{ formation.duree }}</td>
            </tr>
            <tr>
                <th>Status</th>
                <td>{{ formation.status }}</td>
            </tr>
        </tbody>
    </table>
      <h1>Cours</h1>

     <table class="table">
        {% for course in formation.courses %}
        <tr>
            <th>Nom</th>
            <td>{{ course.nomCours }}</td>
        </tr>
        <tr>
            <th>Description</th>
            <td>{{ course.description }}</td>
        </tr>
        <tr>
            <th>Categorie</th>
            <td>{{ course.categorie }}</td>
        </tr>
        <tr>
            <th>Cours</th>
            <a href="{{ path('serve_pdf', {'id': course.idCours}) }}" target="_blank">
        <img src="{{ asset('formations_imgs/pdf.png') }}" alt="PDF icon" style="width: 16px; height: 16px; vertical-align: middle;">
        View PDF
    </a>
</td>
                     <td><a href="#" class="btn btn-primary py-md-3 px-md-5 me-3 animated slideInLeft" id="openVideoButton">Learn More</a></td>
                       
                        <div class="modal fade" id="videoModal" tabindex="-1" aria-labelledby="videoModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <iframe id="videoFrame" width="560" height="315" src="" frameborder="0" allowfullscreen></iframe>
      </div>
    </div>
  </div>
</div>

<!-- Script to Open Video in Modal -->
<script>
    // Function to open the video modal
    function openVideoModal(videoURL) {
        // Set the source of the iframe in the modal
        var videoFrame = document.getElementById("videoFrame");
        videoFrame.src = videoURL;

        // Show the video modal
        var videoModal = new bootstrap.Modal(document.getElementById('videoModal'));
        videoModal.show();
    }

    // Add click event listener to the button
    document.getElementById("openVideoButton").addEventListener("click", function(event) {
        // Prevent default behavior (e.g., following the link)
        event.preventDefault();

        // YouTube video URL
        var videoURL = "{{ course.link }}"; // Replace with proper video URL or video ID extraction logic
     
    var embed_url = "https://www.youtube.com/embed/" + videoURL;

        console.log("Attempting to open video modal with URL:", embed_url);  // Log the URL being used

        openVideoModal(embed_url);
    });
</script>

        {% endfor %}
    </table>
    <a href="{{ path('app_formation_index_back') }}">back to list</a>

    <a href="{{ path('app_formationB_edit', {'idFormation': formation.idFormation}) }}" >edit</a>

    {{ include('formationBack/_delete_form.html.twig') }}
{% endblock %}
